<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>C Code Runner - CodeSphare</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="p-4">
  <h2 class="mb-3">ğŸ”§ CodeSphare: Code Runner</h2>

  <select id="language" class="form-select mb-3">
  <option value="50">C (GCC 9.2.0)</option>
  <option value="54">C++ (G++ 9.2.0)</option>
  <option value="71">Python 3 (3.8.1)</option>
</select>

<label><strong>ğŸ§  Write your code:</strong></label>
<textarea id="code" class="form-control mb-3" rows="10" placeholder="Write your code here..."></textarea>

<label><strong>ğŸ“¥ Custom Input (optional):</strong></label>
<textarea id="userInput" class="form-control mb-3" rows="4" placeholder="Enter input for scanf() / input()..."></textarea>

<button onclick="runCode()" class="btn btn-primary">â–¶ï¸ Run Code</button>

<h5 class="mt-4">ğŸ“¤ Output:</h5>
<pre id="output" class="bg-light p-3 border rounded" contenteditable="true"></pre>

  <!-- <script src="script_c_runner.js"></script> -->
  <script>

    function runCode() {
    const code = document.getElementById("code").value;
    const languageId = document.getElementById("language").value;
    // const userInput = document.getElementById("userInput").value;
    const userInput = document.getElementById("output").value;


    const payload = {
      source_code: code,
      language_id: parseInt(languageId),  // 50 = C (GCC 9.2.0)
      stdin: userInput,        // optional input
    };

    document.getElementById("output").innerText = "â³ Running...";
    
    fetch("https://judge0-ce.p.rapidapi.com/submissions?base64_encoded=false&wait=true", {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
            "x-rapidapi-host": "judge0-ce.p.rapidapi.com",
            "x-rapidapi-key": "1d74aa8374msh48776d5d6cdcb53p13ed0bjsn8b6de8a7d547" // Replace with your own
          },
          body: JSON.stringify(payload),
      })
      .then(response => response.json())
      .then(result => {
        let output="";

          // const output = result.stdout || result.stderr || result.compile_output || "âš ï¸ No output";
        if(result.compile_output){
          output = result.compile_output;
        }else if(result.stdout){
          output = result.stdout;
        }else if(result.stderr){
          output = result.stderr;
        // }else{
          // output = "NO O/P available";
        }

          document.getElementById("output").innerText = output;
      })
      .catch(err => {
          document.getElementById("output").innerText = "âŒ Error: " + err;
      });
  }

</script>
  <!-- <script src="script_c_runner.js"></script> -->
</body>
</html>
